# Anamnesis RDF Schema (Ontology)
# Vocabulary for conversation knowledge graphs
# Version: 0.1.0
# Date: 2025-11-22

@prefix anamnesis: <http://anamnesis.hyperpolymath.org/ns#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dc: <http://purl.org/dc/terms/> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .

# ==============================================================================
# Ontology Metadata
# ==============================================================================

anamnesis: a owl:Ontology ;
    dc:title "Anamnesis Conversation Knowledge Ontology" ;
    dc:description "RDF vocabulary for representing multi-LLM conversation threads, artifact lifecycles, and cross-conversation relationships" ;
    dc:creator "Hyperpolymath" ;
    dc:created "2025-11-22"^^xsd:date ;
    dc:modified "2025-11-22"^^xsd:date ;
    owl:versionInfo "0.1.0" ;
    rdfs:comment "Designed for tangled conversation untangling, artifact tracking, and episodic memory" .

# ==============================================================================
# Core Classes
# ==============================================================================

## Conversation

anamnesis:Conversation a owl:Class ;
    rdfs:label "Conversation" ;
    rdfs:comment "A discussion thread from one or more LLMs and/or humans. May span multiple sessions." ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:ConversationSession a owl:Class ;
    rdfs:label "Conversation Session" ;
    rdfs:comment "A single session or export within a larger conversation" ;
    rdfs:subClassOf anamnesis:Conversation ;
    rdfs:isDefinedBy anamnesis: .

## Message

anamnesis:Message a owl:Class ;
    rdfs:label "Message" ;
    rdfs:comment "A single message within a conversation (from human or LLM)" ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:HumanMessage a owl:Class ;
    rdfs:label "Human Message" ;
    rdfs:subClassOf anamnesis:Message ;
    rdfs:comment "Message authored by a human" ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:LLMMessage a owl:Class ;
    rdfs:label "LLM Message" ;
    rdfs:subClassOf anamnesis:Message ;
    rdfs:comment "Message generated by a language model" ;
    rdfs:isDefinedBy anamnesis: .

## Artifact

anamnesis:Artifact a owl:Class ;
    rdfs:label "Artifact" ;
    rdfs:comment "Created content (code, documentation, configuration, etc.) tracked through its lifecycle" ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:CodeArtifact a owl:Class ;
    rdfs:label "Code Artifact" ;
    rdfs:subClassOf anamnesis:Artifact ;
    rdfs:comment "Source code artifact" ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:DocumentationArtifact a owl:Class ;
    rdfs:label "Documentation Artifact" ;
    rdfs:subClassOf anamnesis:Artifact ;
    rdfs:comment "Documentation artifact (Markdown, AsciiDoc, LaTeX, etc.)" ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:ConfigurationArtifact a owl:Class ;
    rdfs:label "Configuration Artifact" ;
    rdfs:subClassOf anamnesis:Artifact ;
    rdfs:comment "Configuration file artifact (JSON, YAML, TOML, etc.)" ;
    rdfs:isDefinedBy anamnesis: .

## Lifecycle

anamnesis:LifecycleEvent a owl:Class ;
    rdfs:label "Lifecycle Event" ;
    rdfs:comment "A state transition in an artifact's lifecycle" ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:State a owl:Class ;
    rdfs:label "State" ;
    rdfs:comment "A state in the artifact lifecycle state machine" ;
    rdfs:isDefinedBy anamnesis: .

## Project and Category

anamnesis:Project a owl:Class ;
    rdfs:label "Project" ;
    rdfs:comment "A project or topic category" ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:ProjectMembership a owl:Class ;
    rdfs:label "Project Membership" ;
    rdfs:comment "Reified membership relationship with fuzzy strength" ;
    rdfs:isDefinedBy anamnesis: .

## Speaker

anamnesis:Speaker a owl:Class ;
    rdfs:label "Speaker" ;
    rdfs:comment "A participant in conversations (human or LLM)" ;
    rdfs:subClassOf foaf:Agent ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:Human a owl:Class ;
    rdfs:label "Human" ;
    rdfs:subClassOf anamnesis:Speaker, foaf:Person ;
    rdfs:comment "Human participant" ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:LLM a owl:Class ;
    rdfs:label "Language Model" ;
    rdfs:subClassOf anamnesis:Speaker ;
    rdfs:comment "AI language model participant" ;
    rdfs:isDefinedBy anamnesis: .

## Platform

anamnesis:Platform a owl:Class ;
    rdfs:label "Platform" ;
    rdfs:comment "Conversation platform or LLM service" ;
    rdfs:isDefinedBy anamnesis: .

# ==============================================================================
# Properties - Conversation
# ==============================================================================

anamnesis:contains a owl:ObjectProperty ;
    rdfs:label "contains" ;
    rdfs:comment "Conversation contains message" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range anamnesis:Message ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:discusses a owl:ObjectProperty ;
    rdfs:label "discusses" ;
    rdfs:comment "Conversation discusses artifact" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range anamnesis:Artifact ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:platform a owl:ObjectProperty ;
    rdfs:label "platform" ;
    rdfs:comment "Conversation occurred on platform" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range anamnesis:Platform ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:sessionOf a owl:ObjectProperty ;
    rdfs:label "session of" ;
    rdfs:comment "This session is part of a larger conversation" ;
    rdfs:domain anamnesis:ConversationSession ;
    rdfs:range anamnesis:Conversation ;
    rdfs:isDefinedBy anamnesis: .

# ==============================================================================
# Properties - Message
# ==============================================================================

anamnesis:partOf a owl:ObjectProperty ;
    rdfs:label "part of" ;
    rdfs:comment "Message is part of conversation" ;
    rdfs:domain anamnesis:Message ;
    rdfs:range anamnesis:Conversation ;
    owl:inverseOf anamnesis:contains ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:speaker a owl:ObjectProperty ;
    rdfs:label "speaker" ;
    rdfs:comment "Message spoken by speaker" ;
    rdfs:domain anamnesis:Message ;
    rdfs:range anamnesis:Speaker ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:content a owl:DatatypeProperty ;
    rdfs:label "content" ;
    rdfs:comment "Textual content of message" ;
    rdfs:domain anamnesis:Message ;
    rdfs:range xsd:string ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:previousMessage a owl:ObjectProperty ;
    rdfs:label "previous message" ;
    rdfs:comment "Previous message in conversation sequence" ;
    rdfs:domain anamnesis:Message ;
    rdfs:range anamnesis:Message ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:nextMessage a owl:ObjectProperty ;
    rdfs:label "next message" ;
    rdfs:comment "Next message in conversation sequence" ;
    rdfs:domain anamnesis:Message ;
    rdfs:range anamnesis:Message ;
    owl:inverseOf anamnesis:previousMessage ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:messageIndex a owl:DatatypeProperty ;
    rdfs:label "message index" ;
    rdfs:comment "Sequential index of message in conversation (0-based)" ;
    rdfs:domain anamnesis:Message ;
    rdfs:range xsd:integer ;
    rdfs:isDefinedBy anamnesis: .

# ==============================================================================
# Properties - Artifact
# ==============================================================================

anamnesis:createdIn a owl:ObjectProperty ;
    rdfs:label "created in" ;
    rdfs:comment "Artifact was created in this message/conversation" ;
    rdfs:domain anamnesis:Artifact ;
    rdfs:range [a owl:Class ; owl:unionOf (anamnesis:Message anamnesis:Conversation)] ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:modifiedIn a owl:ObjectProperty ;
    rdfs:label "modified in" ;
    rdfs:comment "Artifact was modified in this message/conversation" ;
    rdfs:domain anamnesis:Artifact ;
    rdfs:range [a owl:Class ; owl:unionOf (anamnesis:Message anamnesis:Conversation)] ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:removedIn a owl:ObjectProperty ;
    rdfs:label "removed in" ;
    rdfs:comment "Artifact was removed in this message/conversation" ;
    rdfs:domain anamnesis:Artifact ;
    rdfs:range [a owl:Class ; owl:unionOf (anamnesis:Message anamnesis:Conversation)] ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:evaluatedIn a owl:ObjectProperty ;
    rdfs:label "evaluated in" ;
    rdfs:comment "Artifact was evaluated/tested in this message/conversation" ;
    rdfs:domain anamnesis:Artifact ;
    rdfs:range [a owl:Class ; owl:unionOf (anamnesis:Message anamnesis:Conversation)] ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:state a owl:ObjectProperty ;
    rdfs:label "state" ;
    rdfs:comment "Current state of artifact" ;
    rdfs:domain anamnesis:Artifact ;
    rdfs:range anamnesis:State ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:hasLifecycle a owl:ObjectProperty ;
    rdfs:label "has lifecycle" ;
    rdfs:comment "Artifact has lifecycle event" ;
    rdfs:domain anamnesis:Artifact ;
    rdfs:range anamnesis:LifecycleEvent ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:artifactName a owl:DatatypeProperty ;
    rdfs:label "artifact name" ;
    rdfs:comment "Name or identifier of artifact (e.g., filename)" ;
    rdfs:domain anamnesis:Artifact ;
    rdfs:range xsd:string ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:artifactContent a owl:DatatypeProperty ;
    rdfs:label "artifact content" ;
    rdfs:comment "Content of artifact (code, text, configuration)" ;
    rdfs:domain anamnesis:Artifact ;
    rdfs:range xsd:string ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:language a owl:DatatypeProperty ;
    rdfs:label "language" ;
    rdfs:comment "Programming language of code artifact" ;
    rdfs:domain anamnesis:CodeArtifact ;
    rdfs:range xsd:string ;
    rdfs:isDefinedBy anamnesis: .

# ==============================================================================
# Properties - Lifecycle
# ==============================================================================

anamnesis:artifact a owl:ObjectProperty ;
    rdfs:label "artifact" ;
    rdfs:comment "Lifecycle event pertains to this artifact" ;
    rdfs:domain anamnesis:LifecycleEvent ;
    rdfs:range anamnesis:Artifact ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:newState a owl:ObjectProperty ;
    rdfs:label "new state" ;
    rdfs:comment "State transitioned to in this event" ;
    rdfs:domain anamnesis:LifecycleEvent ;
    rdfs:range anamnesis:State ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:oldState a owl:ObjectProperty ;
    rdfs:label "old state" ;
    rdfs:comment "State transitioned from in this event" ;
    rdfs:domain anamnesis:LifecycleEvent ;
    rdfs:range anamnesis:State ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:occurredIn a owl:ObjectProperty ;
    rdfs:label "occurred in" ;
    rdfs:comment "Lifecycle event occurred in this message/conversation" ;
    rdfs:domain anamnesis:LifecycleEvent ;
    rdfs:range [a owl:Class ; owl:unionOf (anamnesis:Message anamnesis:Conversation)] ;
    rdfs:isDefinedBy anamnesis: .

# ==============================================================================
# Properties - Project Categorization
# ==============================================================================

anamnesis:belongsTo a owl:ObjectProperty ;
    rdfs:label "belongs to" ;
    rdfs:comment "Conversation belongs to project" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range anamnesis:Project ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:hasMembership a owl:ObjectProperty ;
    rdfs:label "has membership" ;
    rdfs:comment "Conversation has reified membership (for fuzzy strength)" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range anamnesis:ProjectMembership ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:memberOf a owl:ObjectProperty ;
    rdfs:label "member of" ;
    rdfs:comment "Membership is of this project" ;
    rdfs:domain anamnesis:ProjectMembership ;
    rdfs:range anamnesis:Project ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:membershipStrength a owl:DatatypeProperty ;
    rdfs:label "membership strength" ;
    rdfs:comment "Fuzzy membership strength (0.0 to 1.0)" ;
    rdfs:domain [a owl:Class ; owl:unionOf (anamnesis:Conversation anamnesis:ProjectMembership)] ;
    rdfs:range xsd:float ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:membershipType a owl:ObjectProperty ;
    rdfs:label "membership type" ;
    rdfs:comment "Type of membership (primary, secondary, tangential)" ;
    rdfs:domain anamnesis:ProjectMembership ;
    rdfs:range anamnesis:MembershipType ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:MembershipType a owl:Class ;
    rdfs:label "Membership Type" ;
    rdfs:comment "Type of project membership" ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:primary a anamnesis:MembershipType ;
    rdfs:label "primary" ;
    rdfs:comment "Primary project membership (strength ~1.0)" .

anamnesis:secondary a anamnesis:MembershipType ;
    rdfs:label "secondary" ;
    rdfs:comment "Secondary project membership (strength ~0.6)" .

anamnesis:tangential a anamnesis:MembershipType ;
    rdfs:label "tangential" ;
    rdfs:comment "Tangential project membership (strength ~0.3)" .

# ==============================================================================
# Properties - Cross-Conversation Linking
# ==============================================================================

anamnesis:references a owl:ObjectProperty ;
    rdfs:label "references" ;
    rdfs:comment "Message/artifact references another message/artifact" ;
    rdfs:domain [a owl:Class ; owl:unionOf (anamnesis:Message anamnesis:Artifact)] ;
    rdfs:range [a owl:Class ; owl:unionOf (anamnesis:Message anamnesis:Artifact)] ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:referencesConversation a owl:ObjectProperty ;
    rdfs:label "references conversation" ;
    rdfs:comment "Cross-conversation reference" ;
    rdfs:domain [a owl:Class ; owl:unionOf (anamnesis:Message anamnesis:Artifact)] ;
    rdfs:range anamnesis:Conversation ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:relatedTo a owl:ObjectProperty, owl:SymmetricProperty ;
    rdfs:label "related to" ;
    rdfs:comment "Symmetric relation between conversations" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range anamnesis:Conversation ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:contaminates a owl:ObjectProperty ;
    rdfs:label "contaminates" ;
    rdfs:comment "Conversation contaminates another (shares artifacts across different primary projects)" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range anamnesis:Conversation ;
    rdfs:isDefinedBy anamnesis: .

# ==============================================================================
# Properties - Temporal
# ==============================================================================

anamnesis:timestamp a owl:DatatypeProperty ;
    rdfs:label "timestamp" ;
    rdfs:comment "Timestamp of conversation, message, or event" ;
    rdfs:domain [a owl:Class ; owl:unionOf (
        anamnesis:Conversation
        anamnesis:Message
        anamnesis:LifecycleEvent
    )] ;
    rdfs:range xsd:dateTime ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:startTime a owl:DatatypeProperty ;
    rdfs:label "start time" ;
    rdfs:comment "Start time of conversation or session" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range xsd:dateTime ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:endTime a owl:DatatypeProperty ;
    rdfs:label "end time" ;
    rdfs:comment "End time of conversation or session" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range xsd:dateTime ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:duration a owl:DatatypeProperty ;
    rdfs:label "duration" ;
    rdfs:comment "Duration of conversation in seconds" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range xsd:float ;
    rdfs:isDefinedBy anamnesis: .

# ==============================================================================
# Properties - Speaker
# ==============================================================================

anamnesis:speakerName a owl:DatatypeProperty ;
    rdfs:label "speaker name" ;
    rdfs:comment "Name of speaker" ;
    rdfs:domain anamnesis:Speaker ;
    rdfs:range xsd:string ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:modelName a owl:DatatypeProperty ;
    rdfs:label "model name" ;
    rdfs:comment "Name of language model" ;
    rdfs:domain anamnesis:LLM ;
    rdfs:range xsd:string ;
    rdfs:isDefinedBy anamnesis: .

# ==============================================================================
# Properties - Metadata
# ==============================================================================

anamnesis:exportFormat a owl:DatatypeProperty ;
    rdfs:label "export format" ;
    rdfs:comment "Original export format (e.g., 'claude-json', 'chatgpt-export')" ;
    rdfs:domain anamnesis:Conversation ;
    rdfs:range xsd:string ;
    rdfs:isDefinedBy anamnesis: .

anamnesis:source a owl:DatatypeProperty ;
    rdfs:label "source" ;
    rdfs:comment "Original source file or URL" ;
    rdfs:range xsd:anyURI ;
    rdfs:isDefinedBy anamnesis: .

# ==============================================================================
# State Individuals
# ==============================================================================

anamnesis:StateCreated a anamnesis:State ;
    rdfs:label "created" ;
    rdfs:comment "Artifact has been created" .

anamnesis:StateModified a anamnesis:State ;
    rdfs:label "modified" ;
    rdfs:comment "Artifact has been modified" .

anamnesis:StateRemoved a anamnesis:State ;
    rdfs:label "removed" ;
    rdfs:comment "Artifact has been removed or deleted" .

anamnesis:StateEvaluated a anamnesis:State ;
    rdfs:label "evaluated" ;
    rdfs:comment "Artifact has been evaluated or tested" .

# ==============================================================================
# Platform Individuals
# ==============================================================================

anamnesis:PlatformClaude a anamnesis:Platform ;
    rdfs:label "Claude" ;
    rdfs:comment "Anthropic Claude platform" .

anamnesis:PlatformChatGPT a anamnesis:Platform ;
    rdfs:label "ChatGPT" ;
    rdfs:comment "OpenAI ChatGPT platform" .

anamnesis:PlatformMistral a anamnesis:Platform ;
    rdfs:label "Mistral" ;
    rdfs:comment "Mistral AI platform" .

anamnesis:PlatformGit a anamnesis:Platform ;
    rdfs:label "Git" ;
    rdfs:comment "Git commit history" .

anamnesis:PlatformBrowser a anamnesis:Platform ;
    rdfs:label "Browser" ;
    rdfs:comment "Browser-based conversation" .

# ==============================================================================
# Example Instance Data (for reference)
# ==============================================================================

# Conversation
<anamnesis:conv:example-123> a anamnesis:Conversation ;
    anamnesis:timestamp "2025-11-22T10:30:00Z"^^xsd:dateTime ;
    anamnesis:platform anamnesis:PlatformClaude ;
    anamnesis:contains <anamnesis:msg:msg-001>, <anamnesis:msg:msg-002> ;
    anamnesis:discusses <anamnesis:artifact:art-abc> ;
    anamnesis:belongsTo <anamnesis:proj:anamnesis> ;
    anamnesis:membershipStrength 0.8 .

# Message
<anamnesis:msg:msg-001> a anamnesis:HumanMessage ;
    anamnesis:partOf <anamnesis:conv:example-123> ;
    anamnesis:speaker <anamnesis:speaker:user> ;
    anamnesis:content "Let's create a parser for Claude conversations" ;
    anamnesis:timestamp "2025-11-22T10:30:00Z"^^xsd:dateTime ;
    anamnesis:messageIndex 0 .

<anamnesis:msg:msg-002> a anamnesis:LLMMessage ;
    anamnesis:partOf <anamnesis:conv:example-123> ;
    anamnesis:speaker <anamnesis:speaker:claude> ;
    anamnesis:content "I'll help you create an OCaml parser..." ;
    anamnesis:timestamp "2025-11-22T10:30:15Z"^^xsd:dateTime ;
    anamnesis:messageIndex 1 ;
    anamnesis:previousMessage <anamnesis:msg:msg-001> .

# Artifact
<anamnesis:artifact:art-abc> a anamnesis:CodeArtifact ;
    anamnesis:artifactName "conversation_parser.ml" ;
    anamnesis:language "ocaml" ;
    anamnesis:createdIn <anamnesis:msg:msg-002> ;
    anamnesis:state anamnesis:StateCreated ;
    anamnesis:hasLifecycle <anamnesis:event:ev-001> .

# Lifecycle Event
<anamnesis:event:ev-001> a anamnesis:LifecycleEvent ;
    anamnesis:artifact <anamnesis:artifact:art-abc> ;
    anamnesis:newState anamnesis:StateCreated ;
    anamnesis:timestamp "2025-11-22T10:30:15Z"^^xsd:dateTime ;
    anamnesis:occurredIn <anamnesis:msg:msg-002> .

# Speaker
<anamnesis:speaker:claude> a anamnesis:LLM ;
    anamnesis:speakerName "Claude" ;
    anamnesis:modelName "claude-3-5-sonnet-20241022" .

# Project
<anamnesis:proj:anamnesis> a anamnesis:Project ;
    rdfs:label "Anamnesis" ;
    rdfs:comment "Conversation knowledge extraction system" .
